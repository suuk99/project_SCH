CREATE DATABASE SCH;
USE SCH;


CREATE TABLE `user` (
  id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  `name` VARCHAR(20) NOT NULL,
  userId VARCHAR(50) NOT NULL UNIQUE,
  `password` VARCHAR(100) NOT NULL,
  `role` VARCHAR(30) DEFAULT 'USER',
  sex VARCHAR(10) NOT NULL,
  award VARCHAR(30),
  regDate DATETIME NOT NULL DEFAULT NOW(),
  birthDate VARCHAR(8) NOT NULL,
  phoneNum VARCHAR(11) NOT NULL   
);


CREATE TABLE userSchedule(
  id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  userId VARCHAR(20) NOT NULL,
  weekStart DATE NOT NULL,
  `weekDay` INT NOT NULL,
  startTime TIME,
  endTime TIME,
  workStatus ENUM('yes', 'no') DEFAULT 'no',
  confirm BOOLEAN DEFAULT 0
);
        
SELECT * FROM userSchedule;

CREATE TABLE timeTable (
  id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  weekStart DATE NOT NULL,
  assignedTime TEXT NOT NULL,
  `status` VARCHAR(30) NOT NULL DEFAULT 'UPLOAD'
);


CREATE TABLE notice (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(50) NOT NULL,
    content TEXT NOT NULL,
    writerId INT UNSIGNED NOT NULL,
    regDate DATETIME NOT NULL DEFAULT NOW(),
    updateDate DATETIME, -> 없애도 될듯
    hit INT NOT NULL DEFAULT 0
);

SELECT * FROM notice;


CREATE TABLE salary (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    user_id INT UNSIGNED NOT NULL,
    `month` VARCHAR(10) NOT NULL,  //급여 월
    hourly_rate INT UNSIGNED NOT NULL, //시급
    total_hours DECIMAL(5,2) NOT NULL, // 총 근무 시간
    gross_pay INT UNSIGNED NOT NULL,	// 총 급여 
    deductions INT UNSIGNED NOT NULL,	// 공제금액
    net_pay INT UNSIGNED NOT NULL	// 실수령액
);



//테스트 데이터
INSERT INTO notice (regDate, writerId, title, content)
SELECT NOW(), FLOOR(RAND() * 3) + 2, CONCAT('공지사항_', SUBSTR(RAND(), 1, 5)), CONCAT('공지사항 내용_', SUBSTR(RAND(), 1, 5)) FROM notice;
   